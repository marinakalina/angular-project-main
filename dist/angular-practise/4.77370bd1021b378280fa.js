(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{jkDv:function(t,e,i){"use strict";i.r(e),i.d(e,"AdminModule",function(){return Z});var n=i("ofXK"),r=i("tyNb"),s=i("fXoL"),o=i("+zHE"),a=i("XNiG");let b=(()=>{class t{constructor(){this.alert$=new a.a}success(t){this.alert$.next({type:"success",text:t})}warning(t){this.alert$.next({type:"warning",text:t})}danger(t){this.alert$.next({type:"danger",text:t})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=s.Cb({token:t,factory:t.\u0275fac}),t})();const c=function(t,e,i){return{"alert-success":t,"alert-warning":e,"alert-danger":i}};function l(t,e){if(1&t&&(s.Jb(0,"div",1),s.Jb(1,"div",2),s.Jb(2,"p"),s.kc(3),s.Ib(),s.Ib(),s.Ib()),2&t){const t=s.Sb();s.wb(1),s.Yb("ngClass",s.bc(2,c,"success"===t.type,"warning"===t.type,"danger"===t.type)),s.wb(2),s.lc(t.text)}}let u=(()=>{class t{constructor(t){this.alertService=t,this.delay=1500}ngOnInit(){this.alertService.alert$.subscribe(t=>{this.text=t.text,this.type=t.type;const e=setTimeout(()=>{clearTimeout(e),this.text=""},this.delay)})}ngOnDestroy(){this.aSub&&this.aSub.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(s.Gb(b))},t.\u0275cmp=s.Ab({type:t,selectors:[["app-alert"]],inputs:{delay:"delay"},decls:1,vars:1,consts:[["class","alert-wrap",4,"ngIf"],[1,"alert-wrap"],[1,"alert",3,"ngClass"]],template:function(t,e){1&t&&s.ic(0,l,4,6,"div",0),2&t&&s.Yb("ngIf",e.text)},directives:[n.l,n.j],styles:[".alert-wrap[_ngcontent-%COMP%]{position:fixed;top:50px;right:40px;max-width:200px}"]}),t})();const d=function(){return["/admin","dashboard"]},f=function(){return["/admin","create"]};function m(t,e){if(1&t){const t=s.Kb();s.Jb(0,"ul"),s.Jb(1,"li",4),s.Jb(2,"a",5),s.kc(3,"Main"),s.Ib(),s.Ib(),s.Jb(4,"li",4),s.Jb(5,"a",5),s.kc(6,"Create"),s.Ib(),s.Ib(),s.Jb(7,"li"),s.Jb(8,"a",6),s.Qb("click",function(e){return s.ec(t),s.Sb().logout(e)}),s.kc(9,"Logout"),s.Ib(),s.Ib(),s.Ib()}2&t&&(s.wb(2),s.Yb("routerLink",s.Zb(2,d)),s.wb(3),s.Yb("routerLink",s.Zb(3,f)))}let h=(()=>{class t{constructor(t,e){this.router=t,this.authService=e}ngOnInit(){}logout(t){t.preventDefault(),this.authService.logout(),this.router.navigate(["/admin","login"])}}return t.\u0275fac=function(e){return new(e||t)(s.Gb(r.c),s.Gb(o.a))},t.\u0275cmp=s.Ab({type:t,selectors:[["app-admin-layout"]],decls:8,vars:1,consts:[[1,"navbar","bg-primary"],["routerLink","/"],[4,"ngIf"],[1,"container"],["routerLinkActive","active"],[3,"routerLink"],[3,"click"]],template:function(t,e){1&t&&(s.Hb(0,"app-alert"),s.Jb(1,"nav",0),s.Jb(2,"h1"),s.Jb(3,"a",1),s.kc(4,"Angular Admin"),s.Ib(),s.Ib(),s.ic(5,m,10,4,"ul",2),s.Ib(),s.Jb(6,"div",3),s.Hb(7,"router-outlet"),s.Ib()),2&t&&(s.wb(5),s.Yb("ngIf",e.authService.isAuthenticated()))},directives:[u,r.f,n.l,r.h,r.e],styles:[""]}),t})();var g=i("3Pt+");function p(t,e){if(1&t&&(s.Jb(0,"div",10),s.kc(1),s.Ib()),2&t){const t=e.ngIf;s.wb(1),s.mc(" ",t," ")}}function v(t,e){if(1&t&&(s.Jb(0,"div",11),s.kc(1),s.Ib()),2&t){const t=s.Sb();s.wb(1),s.mc(" ",t.message," ")}}function I(t,e){1&t&&(s.Jb(0,"small"),s.kc(1,"Enter Email"),s.Ib())}function w(t,e){1&t&&(s.Jb(0,"small"),s.kc(1,"Invalid Email"),s.Ib())}function J(t,e){if(1&t&&(s.Jb(0,"div",12),s.ic(1,I,2,0,"small",13),s.ic(2,w,2,0,"small",13),s.Ib()),2&t){const t=s.Sb();s.wb(1),s.Yb("ngIf",t.form.get("email").errors.required),s.wb(1),s.Yb("ngIf",t.form.get("email").errors.email)}}function k(t,e){1&t&&(s.Jb(0,"small"),s.kc(1,"Enter Password"),s.Ib())}function S(t,e){if(1&t&&(s.Jb(0,"small"),s.kc(1),s.Ib()),2&t){const t=s.Sb(2);s.wb(1),s.nc(" Minimal password length is ",t.form.get("password").errors.minlength.requiredLength," symbols. Now is ",t.form.get("password").errors.minlength.actualLength," symbol(s) ")}}function y(t,e){if(1&t&&(s.Jb(0,"div",12),s.ic(1,k,2,0,"small",13),s.ic(2,S,2,2,"small",13),s.Ib()),2&t){const t=s.Sb();s.wb(1),s.Yb("ngIf",t.form.get("password").errors.required),s.wb(1),s.Yb("ngIf",t.form.get("password").errors.minlength)}}const C=function(t){return{invalid:t}};let x=(()=>{class t{constructor(t,e,i){this.authService=t,this.router=e,this.route=i,this.submitting=!1,this.message="",t.isAuthenticated()&&e.navigate(["/admin","dashboard"])}ngOnInit(){this.route.queryParams.subscribe(t=>{t.loginAgain&&(this.message="Login Please")}),this.form=new g.d({email:new g.b(null,[g.m.email,g.m.required]),password:new g.b(null,[g.m.required,g.m.minLength(6)])})}submit(){this.form.invalid||(this.submitting=!0,this.authService.login({email:this.form.value.email,password:this.form.value.password}).subscribe(()=>{this.form.reset(),this.submitting=!1,this.router.navigate(["/admin","dashboard"])},()=>{this.submitting=!1}))}isControlNeedMistake(t){return this.form.get(t).touched&&this.form.get(t).invalid}}return t.\u0275fac=function(e){return new(e||t)(s.Gb(o.a),s.Gb(r.c),s.Gb(r.a))},t.\u0275cmp=s.Ab({type:t,selectors:[["app-login-page"]],decls:18,vars:14,consts:[[1,"card",3,"formGroup","ngSubmit"],["class","alert alert-danger",4,"ngIf"],["class","alert alert-info",4,"ngIf"],[1,"form-control",3,"ngClass"],["for","email"],["id","email","type","email","formControlName","email"],["class","validation",4,"ngIf"],["for","password"],["id","password","type","password","formControlName","password"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"alert","alert-danger"],[1,"alert","alert-info"],[1,"validation"],[4,"ngIf"]],template:function(t,e){1&t&&(s.Jb(0,"form",0),s.Qb("ngSubmit",function(){return e.submit()}),s.Jb(1,"h2"),s.kc(2,"Login to Administrator Panel"),s.Ib(),s.ic(3,p,2,1,"div",1),s.Tb(4,"async"),s.ic(5,v,2,1,"div",2),s.Jb(6,"div",3),s.Jb(7,"label",4),s.kc(8,"Email:"),s.Ib(),s.Hb(9,"input",5),s.ic(10,J,3,2,"div",6),s.Ib(),s.Jb(11,"div",3),s.Jb(12,"label",7),s.kc(13,"Password:"),s.Ib(),s.Hb(14,"input",8),s.ic(15,y,3,2,"div",6),s.Ib(),s.Jb(16,"button",9),s.kc(17,"Login"),s.Ib(),s.Ib()),2&t&&(s.Yb("formGroup",e.form),s.wb(3),s.Yb("ngIf",s.Ub(4,8,e.authService.error$)),s.wb(2),s.Yb("ngIf",e.message),s.wb(1),s.Yb("ngClass",s.ac(10,C,e.isControlNeedMistake("email"))),s.wb(4),s.Yb("ngIf",e.isControlNeedMistake("email")),s.wb(1),s.Yb("ngClass",s.ac(12,C,e.isControlNeedMistake("password"))),s.wb(4),s.Yb("ngIf",e.isControlNeedMistake("password")),s.wb(1),s.Yb("disabled",e.form.invalid||e.submitting))},directives:[g.n,g.j,g.e,n.l,n.j,g.a,g.i,g.c],pipes:[n.b],styles:["form[_ngcontent-%COMP%]{max-width:600px;margin:0 auto}"]}),t})();var Y=i("XNvU");let N=(()=>{class t{transform(t,e=""){return(e=e.trim().toLowerCase())?t.filter(t=>t.title.toLowerCase().includes(e)):t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=s.Fb({name:"searchPosts",type:t,pure:!0}),t})();const A=function(t){return["/admin","post",t,"edit"]};function M(t,e){if(1&t){const t=s.Kb();s.Jb(0,"tr"),s.Jb(1,"td"),s.kc(2),s.Ib(),s.Jb(3,"td"),s.kc(4),s.Ib(),s.Jb(5,"td"),s.kc(6),s.Ib(),s.Jb(7,"td"),s.kc(8),s.Tb(9,"date"),s.Ib(),s.Jb(10,"td"),s.Jb(11,"button",5),s.kc(12,"Open"),s.Ib(),s.Jb(13,"a",6),s.Qb("click",function(){s.ec(t);const i=e.$implicit;return s.Sb(2).remove(i.id)}),s.kc(14,"Delete"),s.Ib(),s.Ib(),s.Ib()}if(2&t){const t=e.$implicit,i=e.index;s.wb(2),s.lc(i+1),s.wb(2),s.lc(t.author),s.wb(2),s.lc(t.title),s.wb(2),s.lc(s.Vb(9,5,t.date,"medium")),s.wb(3),s.Yb("routerLink",s.ac(8,A,t.id))}}function P(t,e){if(1&t&&(s.Jb(0,"table"),s.Jb(1,"thead"),s.Jb(2,"tr"),s.Jb(3,"th"),s.kc(4,"#"),s.Ib(),s.Jb(5,"th"),s.kc(6,"Author"),s.Ib(),s.Jb(7,"th"),s.kc(8,"Title"),s.Ib(),s.Jb(9,"th"),s.kc(10,"Date"),s.Ib(),s.Jb(11,"th"),s.kc(12,"Action"),s.Ib(),s.Ib(),s.Ib(),s.Jb(13,"tbody"),s.ic(14,M,15,10,"tr",4),s.Tb(15,"searchPosts"),s.Ib(),s.Ib()),2&t){const t=s.Sb();s.wb(14),s.Yb("ngForOf",s.Vb(15,1,t.posts,t.searchStr))}}function G(t,e){1&t&&(s.Jb(0,"p",7),s.kc(1,"Loading...."),s.Ib())}let O=(()=>{class t{constructor(t,e){this.postsService=t,this.alertService=e,this.posts=[],this.searchStr=""}ngOnInit(){this.pSub=this.postsService.getAll().subscribe(t=>{this.posts=t})}ngOnDestroy(){this.pSub&&this.pSub.unsubscribe(),this.dSub&&this.dSub.unsubscribe()}remove(t){this.dSub=this.postsService.remove(t).subscribe(()=>{this.posts=this.posts.filter(e=>e.id!==t),this.alertService.danger("Post was deleted")})}}return t.\u0275fac=function(e){return new(e||t)(s.Gb(Y.a),s.Gb(b))},t.\u0275cmp=s.Ab({type:t,selectors:[["app-dashboard-page"]],decls:6,vars:3,consts:[[1,"form-control"],["type","text","placeholder","Search post",3,"ngModel","ngModelChange"],[4,"ngIf","ngIfElse"],["loading",""],[4,"ngFor","ngForOf"],[1,"btn","btn-link","open",3,"routerLink"],[3,"click"],[1,"text-center"]],template:function(t,e){if(1&t&&(s.Jb(0,"div"),s.Jb(1,"div",0),s.Jb(2,"input",1),s.Qb("ngModelChange",function(t){return e.searchStr=t}),s.Ib(),s.Ib(),s.ic(3,P,16,4,"table",2),s.Ib(),s.ic(4,G,2,0,"ng-template",null,3,s.jc)),2&t){const t=s.dc(5);s.wb(2),s.Yb("ngModel",e.searchStr),s.wb(1),s.Yb("ngIf",0!==e.posts.length)("ngIfElse",t)}},directives:[g.a,g.i,g.k,n.l,n.k,r.d],pipes:[N,n.e],styles:[".open[_ngcontent-%COMP%]{margin-right:10px}"]}),t})();var L=i("CzEO");function q(t,e){1&t&&(s.Jb(0,"small"),s.kc(1,"Enter Title"),s.Ib())}function j(t,e){if(1&t&&(s.Jb(0,"div",10),s.ic(1,q,2,0,"small",11),s.Ib()),2&t){const t=s.Sb();s.wb(1),s.Yb("ngIf",t.form.get("title").errors.required)}}function E(t,e){1&t&&(s.Jb(0,"small"),s.kc(1,"Who is Author?"),s.Ib())}function T(t,e){if(1&t&&(s.Jb(0,"div",10),s.ic(1,E,2,0,"small",11),s.Ib()),2&t){const t=s.Sb();s.wb(1),s.Yb("ngIf",t.form.get("author").errors.required)}}const H=function(t){return{invalid:t}};let D=(()=>{class t{constructor(t,e){this.postsService=t,this.alertService=e}ngOnInit(){this.form=new g.d({title:new g.b(null,[g.m.required]),author:new g.b(null,[g.m.required]),text:new g.b(null,[g.m.required])})}isControlNeedMistake(t){return this.form.get(t).touched&&this.form.get(t).invalid}submit(){if(this.form.invalid)return;const t={title:this.form.value.title,author:this.form.value.title,date:new Date,text:this.form.value.text};this.postsService.create(t).subscribe(()=>{this.form.reset(),this.alertService.success("Post was created")})}}return t.\u0275fac=function(e){return new(e||t)(s.Gb(Y.a),s.Gb(b))},t.\u0275cmp=s.Ab({type:t,selectors:[["app-create-page"]],decls:19,vars:10,consts:[[3,"formGroup","ngSubmit"],[1,"form-control",3,"ngClass"],["for","title"],["id","title","type","text","formControlName","title"],["class","validation",4,"ngIf"],[1,"form-control"],["formControlName","text"],["for","author"],["id","author","type","text","formControlName","author"],["type","submit",1,"btn","btn-dark","btn-block",3,"disabled"],[1,"validation"],[4,"ngIf"]],template:function(t,e){1&t&&(s.Jb(0,"form",0),s.Qb("ngSubmit",function(){return e.submit()}),s.Jb(1,"h1"),s.kc(2,"Create Post"),s.Ib(),s.Jb(3,"div",1),s.Jb(4,"label",2),s.kc(5,"Post Title:"),s.Ib(),s.Hb(6,"input",3),s.ic(7,j,2,1,"div",4),s.Ib(),s.Jb(8,"div",5),s.Jb(9,"label"),s.kc(10,"Post Content:"),s.Ib(),s.Hb(11,"quill-editor",6),s.Ib(),s.Jb(12,"div",1),s.Jb(13,"label",7),s.kc(14,"Post Author:"),s.Ib(),s.Hb(15,"input",8),s.ic(16,T,2,1,"div",4),s.Ib(),s.Jb(17,"button",9),s.kc(18,"Create Post"),s.Ib(),s.Ib()),2&t&&(s.Yb("formGroup",e.form),s.wb(3),s.Yb("ngClass",s.ac(6,H,e.isControlNeedMistake("title"))),s.wb(4),s.Yb("ngIf",e.isControlNeedMistake("title")),s.wb(5),s.Yb("ngClass",s.ac(8,H,e.isControlNeedMistake("author"))),s.wb(4),s.Yb("ngIf",e.isControlNeedMistake("author")),s.wb(1),s.Yb("disabled",e.form.invalid))},directives:[g.n,g.j,g.e,n.j,g.a,g.i,g.c,n.l,L.a],styles:["form[_ngcontent-%COMP%]{max-width:600px;margin:0 auto}"]}),t})();var $=i("eIep");function Q(t,e){1&t&&(s.Jb(0,"small"),s.kc(1,"Enter Title"),s.Ib())}function F(t,e){if(1&t&&(s.Jb(0,"div",10),s.ic(1,Q,2,0,"small",11),s.Ib()),2&t){const t=s.Sb(2);s.wb(1),s.Yb("ngIf",t.form.get("title").errors.required)}}const K=function(t){return{invalid:t}};function X(t,e){if(1&t){const t=s.Kb();s.Jb(0,"div"),s.Jb(1,"form",2),s.Qb("ngSubmit",function(){return s.ec(t),s.Sb().submit()}),s.Jb(2,"div",3),s.Jb(3,"label",4),s.kc(4,"Post Title:"),s.Ib(),s.Hb(5,"input",5),s.ic(6,F,2,1,"div",6),s.Ib(),s.Jb(7,"div",7),s.Hb(8,"quill-editor",8),s.Ib(),s.Jb(9,"button",9),s.kc(10,"Update"),s.Ib(),s.Ib(),s.Ib()}if(2&t){const t=s.Sb();s.wb(1),s.Yb("formGroup",t.form),s.wb(1),s.Yb("ngClass",s.ac(4,K,t.isControlNeedMistake("title"))),s.wb(4),s.Yb("ngIf",t.isControlNeedMistake("title")),s.wb(3),s.Yb("disabled",t.form.invalid||t.submitting)}}function _(t,e){1&t&&(s.Jb(0,"p",12),s.kc(1,"Loading ..."),s.Ib())}let U=(()=>{class t{constructor(t,e,i){this.route=t,this.postsService=e,this.alertService=i,this.submitting=!1}ngOnInit(){this.route.params.pipe(Object($.a)(t=>this.postsService.getById(t.id))).subscribe(t=>{this.post=t,this.form=new g.d({title:new g.b(t.title,[g.m.required]),text:new g.b(t.text,[g.m.required])})})}submit(){this.form.invalid||(this.submitting=!0,this.uSub=this.postsService.update(Object.assign(Object.assign({},this.post),{text:this.form.value.text,title:this.form.value.title})).subscribe(()=>{this.submitting=!1,this.alertService.success("Post was updated")}))}isControlNeedMistake(t){return this.form.get(t).touched&&this.form.get(t).invalid}ngOnDestroy(){this.uSub&&this.uSub.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(s.Gb(r.a),s.Gb(Y.a),s.Gb(b))},t.\u0275cmp=s.Ab({type:t,selectors:[["app-edit-page"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["loading",""],[3,"formGroup","ngSubmit"],[1,"form-control",3,"ngClass"],["for","title"],["id","title","type","text","formControlName","title"],["class","validation",4,"ngIf"],[1,"form-control"],["formControlName","text"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"validation"],[4,"ngIf"],[1,"text-center"]],template:function(t,e){if(1&t&&(s.ic(0,X,11,6,"div",0),s.ic(1,_,2,0,"ng-template",null,1,s.jc)),2&t){const t=s.dc(2);s.Yb("ngIf",e.form)("ngIfElse",t)}},directives:[n.l,g.n,g.j,g.e,n.j,g.a,g.i,g.c,L.a],styles:[""]}),t})();var z=i("PCNd");let V=(()=>{class t{constructor(t,e){this.authService=t,this.router=e}canActivate(t,e){if(this.authService.isAuthenticated())return!0;this.authService.logout(),this.router.navigate(["/admin","login"],{queryParams:{loginAgain:!0}})}}return t.\u0275fac=function(e){return new(e||t)(s.Nb(o.a),s.Nb(r.c))},t.\u0275prov=s.Cb({token:t,factory:t.\u0275fac}),t})(),Z=(()=>{class t{}return t.\u0275mod=s.Eb({type:t}),t.\u0275inj=s.Db({factory:function(e){return new(e||t)},providers:[V,b],imports:[[n.c,g.l,g.f,z.a,r.g.forChild([{path:"",component:h,children:[{path:"",redirectTo:"/admin/login",pathMatch:"full"},{path:"login",component:x},{path:"dashboard",component:O,canActivate:[V]},{path:"create",component:D,canActivate:[V]},{path:"post/:id/edit",component:U,canActivate:[V]}]}])],r.g]}),t})()}}]);